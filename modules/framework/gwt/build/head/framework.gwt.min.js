function gwtEscape(a){return a.replace(/\\/g,"\\\\").replace(/\|/g,"\\!")}
function gwtGetStrongName(a,b){var c=getParam(a,null,null,/(\w+)='safari'/),d=getParam(a,null,null,/(\w+)='ru'/),e=getParam(a,null,null,/(\w+)='desktop'/);if(!c&&/%VARNAME_BROWSER%/.test(b.strong_name))throw AnyBalance.trace(a),new AnyBalance.Error("Cannot find $strongName: reference to browser.");if(!d&&/%VARNAME_LANG%/.test(b.strong_name))throw AnyBalance.trace(a),new AnyBalance.Error("Cannot find $strongName: reference to language.");if(!e&&/%VARNAME_DEVICE%/.test(b.strong_name))throw AnyBalance.trace(a),
new AnyBalance.Error("Cannot find $strongName: reference to device.");b=new RegExp(makeReplaces(b.strong_name,{VARNAME_BROWSER:c,VARNAME_LANG:d,VARNAME_DEVICE:e}));c=getParam(a,null,null,b);if(!c)throw new AnyBalance.Error("Could not find $strongName: variable name.");b=new RegExp("\\b"+c+"='([^']*)");getParam(a,null,null,b);if(!c)throw new AnyBalance.Error("Could not find $strongName: variable value.");return c}
function gwtGetJSON(a,b){if(/^\/\/EX/i.test(a))throw a=getParam(a,null,null,/Exception[^"]*","([^"]*)"\]/),new AnyBalance.Error(a,null,(b||/Неверный логин или пароль/i).test(a));b=getParam(a,null,null,/\/\/OK(.*)/);if(!b)throw new AnyBalance.Error("Response error: "+a);return getJsonEval(b)}function gwtLoadStrongName(a){var b=AnyBalance.requestGet(a.url+a.auth_nocache,this.g_headers);return gwtGetStrongName(b,a)}
function gwtHeaders(a,b){return addHeaders({"Content-Type":"text/x-gwt-rpc; charset=UTF-8","X-GWT-Module-Base":b.url,"X-GWT-Permutation":a})}function makeReplaces(a,b){for(var c in b)a=a.replace(new RegExp("%"+c+"%","g"),b[c]);return a};
